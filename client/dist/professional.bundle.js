!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);class o{static create(e,t,n){return new Proxy(e,{get:(e,r,l)=>t.includes(r)&&o._isFuntion(e[r])?function(){let t=Reflect.apply(e[r],e,arguments);return n(e),t}:Reflect.get(e,r,l),set(e,o,r,l){let a=Reflect.set(e,o,r,l);return t.includes(o)&&n(e),a}})}static _isFuntion(e){return typeof e==typeof Function}}class r{constructor(e,t,...n){let r=o.create(e,n,e=>t.update(e));return t.update(e),r}}class l{constructor(){this._professionals=[]}add(e){this._professionals.push(e)}get professionals(){return this._professionals}}class a{constructor(e){this._element=e}_template(e){throw new Error("Template method must be implemented")}update(e){this._element.innerHTML=this._template(e)}}class s extends a{constructor(e){super(e)}_template(e){return`\n        <div class="table-responsive">\n            <table class="table table-striped table-sm">\n            <thead>\n                <tr>\n                <th>Nome</th>\n                <th>Área de Atuação</th>\n                <th>Telefone</th>\n                <th>Celular</th>\n                <th>-</th>\n                </tr>\n            </thead>\n            <tbody>\n                ${e.professionals.map(e=>`\n                    <tr>    \n                        <td>${e.name}</td>\n                        <td>${e.departament}</td>\n                        <td>${e.residencialPhone}</td>\n                        <td>${e.cellphone}</td>\n                        <td>\n                            <button type="button" class="btn btn-outline-primary btn-sm btn-edit-professional" data-professionalid="${e.id}">Editar</button>\n                            <button type="button" class="btn btn-outline-danger btn-sm">Remover</button>\n                        </td>\n                    </tr>\n                    `).join("")}\n            </tbody>\n            </table>\n        </div>\n        `}}class i{constructor(e,t,n,o,r=""){this._name=e,this._residencialPhone=t,this._cellphone=n,this._departament=o,this._id=r}get name(){return this._name}get residencialPhone(){return this._residencialPhone}get cellphone(){return this._cellphone}get departament(){return this._departament}get id(){return this._id}}class c{constructor(e){this._professional=new i}get professional(){return this._professional}include(e){this._professional=e,document.querySelector('input[name="name"]').value=e.name,document.querySelector('input[name="residencialPhone"]').value=e.residencialPhone,document.querySelector('input[name="cellphone"]').value=e.cellphone,document.querySelector('select[name="departament"]').value=e.departament}convertToModel(){let e=document.querySelector('input[name="name"]').value,t=document.querySelector('input[name="residencialPhone"]').value,n=document.querySelector('input[name="cellphone"]').value,o=document.querySelector('select[name="departament"]').value,r=document.querySelector('input[name="id"]').value;return this.clean(),new i(e,t,n,o,r)}clean(){this._professional=new i,document.querySelector('input[name="name"]').value="",document.querySelector('input[name="residencialPhone"]').value="",document.querySelector('input[name="cellphone"]').value="",document.querySelector('select[name="departament"]').value=""}}class u extends a{_template(e){return`\n            <input type="hidden" class="form-control" id="id" name="id" value="${e.professional.id?e.professional.id:""}">\n            <div class="form-group">\n                <label for="name">Nome</label>\n                <input type="text" class="form-control" id="name" name="name" placeholder="Maria Souza Silva" value="${e.professional.name?e.professional.name:""}">\n            </div>\n\n            <div class="form-row">\n                <div class="form-group col-md-6">\n                <label for="residencialPhone">Telefone</label>\n                <input type="text" class="form-control" id="residencialPhone" name="residencialPhone" value="${e.professional.residencialPhone?e.professional.residencialPhone:""}">\n                </div>\n                <div class="form-group col-md-6">\n                <label for="cellphone">Celular</label>\n                <input type="text" class="form-control" id="cellphone" name="cellphone" value="${e.professional.cellphone?e.professional.cellphone:""}">\n                </div>\n            </div>\n\n            <div class="form-row">\n                <div class="form-group col-md-6">\n                <label for="departament">Àrea de Atuação</label>\n                <select id="departament" class="form-control" name="departament">\n                    <option value="CABELELEIRA" "${"CABELELEIRA"==e.professional.departament?"selected":""}">Cabeleleira</option>\n                    <option value="MANICURE" "${"MANICURE"==e.professional.departament?"selected":""}">Manicure</option>\n                    <option value="DESIGNSOBRANCELHAS" "${"DESIGNSOBRANCELHAS"==e.professional.departament?"selected":""}">Design de Sobrancelhas</option>\n                    <option value="DEPILADORA" "${"DEPILADORA"==e.professional.departament?"selected":""}">Depiladora</option>\n                    <option value="ESTETICISTA" "${"ESTETICISTA"==e.professional.departament?"selected":""}">Esteticista</option>\n                </select>\n                </div>\n            </div>\n        `}}let d=new class{constructor(){this._professionalsList=new r(new l,new s(document.querySelector("#professionalList")),"add"),this._form=new r(new c(document.querySelector("#professionalForm")),new u(document.querySelector("#professionalFormFields")),"clean","include"),this.init()}init(){let e=new XMLHttpRequest;e.onreadystatechange=()=>{console.log(e.responseText)},e.open("GET","http://localhost:8080/professionals"),e.setRequestHeader("Content-type","application/json"),e.setRequestHeader("Access-Control-Allow-Origin",!0),e.send()}cleanProfessionalForm(){this._form.clean()}createProfessional(){let e=this._form.convertToModel();this._professionalsList.add(e)}editProfessional(e){console.log(e)}};document.querySelector(".btn-modal-professional").addEventListener("click",e=>{e.preventDefault(),$("#modalProfessional").modal("show")}),document.querySelector("#professionalForm").addEventListener("submit",e=>{e.preventDefault(),d.createProfessional(),$("#modalProfessional").modal("hide"),document.querySelectorAll(".btn-edit-professional").forEach(e=>e.addEventListener("click",(function(e){e.preventDefault();let t=this.dataset.professionalid;d.editProfessional(t)})))})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2hlbHBlcnMvUHJveHlGYWN0b3J5LmpzIiwid2VicGFjazovLy8uL3NyYy9oZWxwZXJzL0JpbmRQcm94eU1vZGVsVmlldy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxzL1Byb2Zlc3Npb25hbHNMaXN0LmpzIiwid2VicGFjazovLy8uL3NyYy92aWV3cy9Nb2RlbFZpZXcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdzL1Byb2Zlc3Npb25hbHNMaXN0Vmlldy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxzL1Byb2Zlc3Npb25hbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZm9ybXMvUHJvZmVzc2lvbmFsRm9ybS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld3MvUHJvZmVzc2lvbmFsRm9ybVZpZXcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Byb2Zlc3Npb25hbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udHJvbGxlcnMvUHJvZmVzc2lvbmFsQ29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIlByb3h5RmFjdG9yeSIsInByb3BzIiwiYWN0aW9uIiwiUHJveHkiLCJ0YXJnZXQiLCJwcm9wIiwicmVjZWl2ZXIiLCJpbmNsdWRlcyIsIl9pc0Z1bnRpb24iLCJyZXN1bHQiLCJSZWZsZWN0IiwiYXBwbHkiLCJhcmd1bWVudHMiLCJzZXQiLCJmdW5jIiwibW9kZWwiLCJ2aWV3IiwicHJveHkiLCJ1cGRhdGUiLCJQcm9mZXNzaW9uYWxzTGlzdCIsInRoaXMiLCJfcHJvZmVzc2lvbmFscyIsInByb2Zlc3Npb25hbCIsInB1c2giLCJNb2RlbFZpZXciLCJ2aWV3RWxlbWVudCIsIl9lbGVtZW50IiwiRXJyb3IiLCJpbm5lckhUTUwiLCJfdGVtcGxhdGUiLCJzdXBlciIsInByb2Zlc3Npb25hbHMiLCJtYXAiLCJkZXBhcnRhbWVudCIsInJlc2lkZW5jaWFsUGhvbmUiLCJjZWxscGhvbmUiLCJpZCIsImpvaW4iLCJQcm9mZXNzaW9uYWwiLCJfbmFtZSIsIl9yZXNpZGVuY2lhbFBob25lIiwiX2NlbGxwaG9uZSIsIl9kZXBhcnRhbWVudCIsIl9pZCIsImZvcm1FbGVtZW50IiwiX3Byb2Zlc3Npb25hbCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNsZWFuIiwiY29udHJvbGxlciIsIl9wcm9mZXNzaW9uYWxzTGlzdCIsIl9mb3JtIiwiaW5pdCIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwiY29uc29sZSIsImxvZyIsInJlc3BvbnNlVGV4dCIsIm9wZW4iLCJzZXRSZXF1ZXN0SGVhZGVyIiwic2VuZCIsImNvbnZlcnRUb01vZGVsIiwiYWRkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCIkIiwibW9kYWwiLCJjcmVhdGVQcm9mZXNzaW9uYWwiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImVsZW1lbnQiLCJkYXRhc2V0IiwiZWRpdFByb2Zlc3Npb25hbCJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFH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QkQsU0FBU0MsY0FBYyw0QkFDaEQsUUFBUyxXQUViM0IsS0FBS2dDLE9BR1QsT0FDSSxJQUFJQyxFQUFNLElBQUlDLGVBQ2RELEVBQUlFLG1CQUFxQixLQUNyQkMsUUFBUUMsSUFBSUosRUFBSUssZUFFcEJMLEVBQUlNLEtBQUssTUFBTyx1Q0FFaEJOLEVBQUlPLGlCQUFpQixlQUFnQixvQkFDckNQLEVBQUlPLGlCQUFpQiwrQkFBK0IsR0FDcERQLEVBQUlRLE9BSVIsd0JBQ0l6QyxLQUFLK0IsTUFBTUgsUUFHZixxQkFDSSxJQUFJMUIsRUFBZUYsS0FBSytCLE1BQU1XLGlCQUM5QjFDLEtBQUs4QixtQkFBbUJhLElBQUl6QyxHQUdoQyxpQkFBaUJjLEdBQ2JvQixRQUFRQyxJQUFJckIsS0RyQ3BCVSxTQUFTQyxjQUFjLDJCQUEyQmlCLGlCQUFpQixRQUFTQyxJQUN4RUEsRUFBTUMsaUJBQ05DLEVBQUUsc0JBQXNCQyxNQUFNLFVBR2xDdEIsU0FBU0MsY0FBYyxxQkFBcUJpQixpQkFBaUIsU0FBVUMsSUFDbkVBLEVBQU1DLGlCQUNOakIsRUFBV29CLHFCQUNYRixFQUFFLHNCQUFzQkMsTUFBTSxRQUU5QnRCLFNBQVN3QixpQkFBaUIsMEJBQTBCQyxRQUFRQyxHQUFXQSxFQUFRUixpQkFBaUIsU0FBUyxTQUFTQyxHQUM5R0EsRUFBTUMsaUJBQ04sSUFBSTlCLEVBQUtoQixLQUFLcUQsUUFBd0IsZUFDdEN4QixFQUFXeUIsaUJBQWlCdEMiLCJmaWxlIjoicHJvZmVzc2lvbmFsLmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb3h5RmFjdG9yeSB7XHJcbiAgICBzdGF0aWMgY3JlYXRlKG9iamVjdCwgcHJvcHMsIGFjdGlvbikge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJveHkob2JqZWN0LCB7XHJcbiAgICAgICAgICAgIGdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvcHMuaW5jbHVkZXMocHJvcCkgJiYgUHJveHlGYWN0b3J5Ll9pc0Z1bnRpb24odGFyZ2V0W3Byb3BdKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IFJlZmxlY3QuYXBwbHkodGFyZ2V0W3Byb3BdLCB0YXJnZXQsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbih0YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5nZXQodGFyZ2V0LCBwcm9wLCByZWNlaXZlcik7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICBzZXQodGFyZ2V0LCBwcm9wLCB2YWx1ZSwgcmVjZWl2ZXIpIHtcclxuICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSBSZWZsZWN0LnNldCh0YXJnZXQsIHByb3AsIHZhbHVlLCByZWNlaXZlcik7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvcHMuaW5jbHVkZXMocHJvcCkpIGFjdGlvbih0YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIF9pc0Z1bnRpb24oZnVuYykge1xyXG4gICAgICAgIHJldHVybiB0eXBlb2YoZnVuYykgPT0gdHlwZW9mKEZ1bmN0aW9uKTtcclxuICAgIH1cclxufSIsImltcG9ydCBQcm94eSBmcm9tICcuL1Byb3h5RmFjdG9yeSdcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJpbmRQcm94eU1vZGVsVmlldyB7XHJcbiAgICBjb25zdHJ1Y3Rvcihtb2RlbCwgdmlldywgLi4ucHJvcHMpIHtcclxuICAgICAgICBsZXQgcHJveHkgPSBQcm94eS5jcmVhdGUobW9kZWwsIHByb3BzLCBtb2RlbCA9PiB2aWV3LnVwZGF0ZShtb2RlbCkpO1xyXG4gICAgICAgIHZpZXcudXBkYXRlKG1vZGVsKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHByb3h5O1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvZmVzc2lvbmFsc0xpc3Qge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5fcHJvZmVzc2lvbmFscyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZChwcm9mZXNzaW9uYWwpIHtcclxuICAgICAgICB0aGlzLl9wcm9mZXNzaW9uYWxzLnB1c2gocHJvZmVzc2lvbmFsKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcHJvZmVzc2lvbmFscygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcHJvZmVzc2lvbmFscztcclxuICAgIH1cclxuXHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RlbFZpZXcge1xyXG4gICAgY29uc3RydWN0b3Iodmlld0VsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLl9lbGVtZW50ID0gdmlld0VsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgX3RlbXBsYXRlKG1vZGVsKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUZW1wbGF0ZSBtZXRob2QgbXVzdCBiZSBpbXBsZW1lbnRlZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZShtb2RlbCkge1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQuaW5uZXJIVE1MID0gdGhpcy5fdGVtcGxhdGUobW9kZWwpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFZpZXcgZnJvbSAnLi9Nb2RlbFZpZXcnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9mZXNzaW9uYWxzTGlzdFZpZXcgZXh0ZW5kcyBWaWV3IHtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih2aWV3RWxlbWVudCkge1xyXG4gICAgICAgIHN1cGVyKHZpZXdFbGVtZW50KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgX3RlbXBsYXRlKG1vZGVsKSB7XHJcbiAgICAgICAgcmV0dXJuIGBcclxuICAgICAgICA8ZGl2IGNsYXNzPVwidGFibGUtcmVzcG9uc2l2ZVwiPlxyXG4gICAgICAgICAgICA8dGFibGUgY2xhc3M9XCJ0YWJsZSB0YWJsZS1zdHJpcGVkIHRhYmxlLXNtXCI+XHJcbiAgICAgICAgICAgIDx0aGVhZD5cclxuICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgIDx0aD5Ob21lPC90aD5cclxuICAgICAgICAgICAgICAgIDx0aD7DgXJlYSBkZSBBdHVhw6fDo288L3RoPlxyXG4gICAgICAgICAgICAgICAgPHRoPlRlbGVmb25lPC90aD5cclxuICAgICAgICAgICAgICAgIDx0aD5DZWx1bGFyPC90aD5cclxuICAgICAgICAgICAgICAgIDx0aD4tPC90aD5cclxuICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgIDwvdGhlYWQ+XHJcbiAgICAgICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAgICAgICR7bW9kZWwucHJvZmVzc2lvbmFscy5tYXAocHJvZmVzc2lvbmFsID0+IFxyXG4gICAgICAgICAgICAgICAgICAgIGBcclxuICAgICAgICAgICAgICAgICAgICA8dHI+ICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGQ+JHtwcm9mZXNzaW9uYWwubmFtZX08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGQ+JHtwcm9mZXNzaW9uYWwuZGVwYXJ0YW1lbnR9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkPiR7cHJvZmVzc2lvbmFsLnJlc2lkZW5jaWFsUGhvbmV9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkPiR7cHJvZmVzc2lvbmFsLmNlbGxwaG9uZX08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tb3V0bGluZS1wcmltYXJ5IGJ0bi1zbSBidG4tZWRpdC1wcm9mZXNzaW9uYWxcIiBkYXRhLXByb2Zlc3Npb25hbGlkPVwiJHtwcm9mZXNzaW9uYWwuaWR9XCI+RWRpdGFyPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tb3V0bGluZS1kYW5nZXIgYnRuLXNtXCI+UmVtb3ZlcjwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgYCAgICAgICAgXHJcbiAgICAgICAgICAgICAgICApLmpvaW4oJycpfVxyXG4gICAgICAgICAgICA8L3Rib2R5PlxyXG4gICAgICAgICAgICA8L3RhYmxlPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIGA7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9mZXNzaW9uYWwge1xyXG4gICAgY29uc3RydWN0b3IobmFtZSwgcmVzaWRlbmNpYWxQaG9uZSwgY2VsbHBob25lLCBkZXBhcnRhbWVudCwgaWQ9JycpIHtcclxuICAgICAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLl9yZXNpZGVuY2lhbFBob25lID0gcmVzaWRlbmNpYWxQaG9uZTtcclxuICAgICAgICB0aGlzLl9jZWxscGhvbmUgPSBjZWxscGhvbmU7XHJcbiAgICAgICAgdGhpcy5fZGVwYXJ0YW1lbnQgPSBkZXBhcnRhbWVudDtcclxuICAgICAgICB0aGlzLl9pZCA9IGlkO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBuYW1lKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9uYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCByZXNpZGVuY2lhbFBob25lKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9yZXNpZGVuY2lhbFBob25lO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBjZWxscGhvbmUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NlbGxwaG9uZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZGVwYXJ0YW1lbnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlcGFydGFtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBpZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faWQ7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgUHJvZmVzc2lvbmFsIGZyb20gJy4uL21vZGVscy9Qcm9mZXNzaW9uYWwnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9mZXNzaW9uYWxGb3JtIHtcclxuICAgIGNvbnN0cnVjdG9yKGZvcm1FbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5fcHJvZmVzc2lvbmFsID0gbmV3IFByb2Zlc3Npb25hbCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBwcm9mZXNzaW9uYWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Byb2Zlc3Npb25hbDtcclxuICAgIH1cclxuXHJcbiAgICBpbmNsdWRlKHByb2Zlc3Npb25hbCkge1xyXG4gICAgICAgIHRoaXMuX3Byb2Zlc3Npb25hbCA9IHByb2Zlc3Npb25hbDtcclxuXHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cIm5hbWVcIl0nKS52YWx1ZSA9IHByb2Zlc3Npb25hbC5uYW1lO1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJyZXNpZGVuY2lhbFBob25lXCJdJykudmFsdWUgPSBwcm9mZXNzaW9uYWwucmVzaWRlbmNpYWxQaG9uZTtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwiY2VsbHBob25lXCJdJykudmFsdWUgPSBwcm9mZXNzaW9uYWwuY2VsbHBob25lO1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3NlbGVjdFtuYW1lPVwiZGVwYXJ0YW1lbnRcIl0nKS52YWx1ZSA9IHByb2Zlc3Npb25hbC5kZXBhcnRhbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBjb252ZXJ0VG9Nb2RlbCgpIHtcclxuICAgICAgICBsZXQgbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJuYW1lXCJdJykudmFsdWU7XHJcbiAgICAgICAgbGV0IHJlc2lkZW5jaWFsUGhvbmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwicmVzaWRlbmNpYWxQaG9uZVwiXScpLnZhbHVlO1xyXG4gICAgICAgIGxldCBjZWxscGhvbmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwiY2VsbHBob25lXCJdJykudmFsdWU7XHJcbiAgICAgICAgbGV0IGRlcGFydGFtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc2VsZWN0W25hbWU9XCJkZXBhcnRhbWVudFwiXScpLnZhbHVlO1xyXG4gICAgICAgIGxldCBpZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJpZFwiXScpLnZhbHVlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuY2xlYW4oKTtcclxuICAgICAgICByZXR1cm4gbmV3IFByb2Zlc3Npb25hbChuYW1lLCByZXNpZGVuY2lhbFBob25lLCBjZWxscGhvbmUsIGRlcGFydGFtZW50LCBpZCk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYW4oKSB7XHJcbiAgICAgICAgdGhpcy5fcHJvZmVzc2lvbmFsID0gbmV3IFByb2Zlc3Npb25hbCgpO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwibmFtZVwiXScpLnZhbHVlID0gJyc7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cInJlc2lkZW5jaWFsUGhvbmVcIl0nKS52YWx1ZSA9ICcnO1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJjZWxscGhvbmVcIl0nKS52YWx1ZSA9ICcnO1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3NlbGVjdFtuYW1lPVwiZGVwYXJ0YW1lbnRcIl0nKS52YWx1ZSA9ICcnO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IE1vZGVsVmlldyBmcm9tIFwiLi9Nb2RlbFZpZXdcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb2Zlc3Npb25hbEZvcm1WaWV3IGV4dGVuZHMgTW9kZWxWaWV3e1xyXG4gICAgX3RlbXBsYXRlKG1vZGVsKSB7XHJcbiAgICAgICAgcmV0dXJuIGBcclxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIGlkPVwiaWRcIiBuYW1lPVwiaWRcIiB2YWx1ZT1cIiR7bW9kZWwucHJvZmVzc2lvbmFsLmlkID8gbW9kZWwucHJvZmVzc2lvbmFsLmlkIDogJyd9XCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XHJcbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwibmFtZVwiPk5vbWU8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBpZD1cIm5hbWVcIiBuYW1lPVwibmFtZVwiIHBsYWNlaG9sZGVyPVwiTWFyaWEgU291emEgU2lsdmFcIiB2YWx1ZT1cIiR7bW9kZWwucHJvZmVzc2lvbmFsLm5hbWUgPyBtb2RlbC5wcm9mZXNzaW9uYWwubmFtZSA6ICcnfVwiPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLXJvd1wiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXAgY29sLW1kLTZcIj5cclxuICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJyZXNpZGVuY2lhbFBob25lXCI+VGVsZWZvbmU8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBpZD1cInJlc2lkZW5jaWFsUGhvbmVcIiBuYW1lPVwicmVzaWRlbmNpYWxQaG9uZVwiIHZhbHVlPVwiJHttb2RlbC5wcm9mZXNzaW9uYWwucmVzaWRlbmNpYWxQaG9uZSA/IG1vZGVsLnByb2Zlc3Npb25hbC5yZXNpZGVuY2lhbFBob25lIDogJyd9XCI+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwIGNvbC1tZC02XCI+XHJcbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiY2VsbHBob25lXCI+Q2VsdWxhcjwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIGlkPVwiY2VsbHBob25lXCIgbmFtZT1cImNlbGxwaG9uZVwiIHZhbHVlPVwiJHttb2RlbC5wcm9mZXNzaW9uYWwuY2VsbHBob25lID8gbW9kZWwucHJvZmVzc2lvbmFsLmNlbGxwaG9uZSA6ICcnfVwiPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tcm93XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cCBjb2wtbWQtNlwiPlxyXG4gICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImRlcGFydGFtZW50XCI+w4ByZWEgZGUgQXR1YcOnw6NvPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9XCJkZXBhcnRhbWVudFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgbmFtZT1cImRlcGFydGFtZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIkNBQkVMRUxFSVJBXCIgXCIke21vZGVsLnByb2Zlc3Npb25hbC5kZXBhcnRhbWVudCA9PSAnQ0FCRUxFTEVJUkEnID8gJ3NlbGVjdGVkJyA6ICcnfVwiPkNhYmVsZWxlaXJhPC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIk1BTklDVVJFXCIgXCIke21vZGVsLnByb2Zlc3Npb25hbC5kZXBhcnRhbWVudCA9PSAnTUFOSUNVUkUnID8gJ3NlbGVjdGVkJyA6ICcnfVwiPk1hbmljdXJlPC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIkRFU0lHTlNPQlJBTkNFTEhBU1wiIFwiJHttb2RlbC5wcm9mZXNzaW9uYWwuZGVwYXJ0YW1lbnQgPT0gJ0RFU0lHTlNPQlJBTkNFTEhBUycgPyAnc2VsZWN0ZWQnIDogJyd9XCI+RGVzaWduIGRlIFNvYnJhbmNlbGhhczwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJERVBJTEFET1JBXCIgXCIke21vZGVsLnByb2Zlc3Npb25hbC5kZXBhcnRhbWVudCA9PSAnREVQSUxBRE9SQScgPyAnc2VsZWN0ZWQnIDogJyd9XCI+RGVwaWxhZG9yYTwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJFU1RFVElDSVNUQVwiIFwiJHttb2RlbC5wcm9mZXNzaW9uYWwuZGVwYXJ0YW1lbnQgPT0gJ0VTVEVUSUNJU1RBJyA/ICdzZWxlY3RlZCcgOiAnJ31cIj5Fc3RldGljaXN0YTwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgPC9zZWxlY3Q+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgYDtcclxuICAgIH1cclxufSIsImltcG9ydCBQcm9mZXNzaW9uYWxDb250cm9sbGVyIGZyb20gXCIuL2NvbnRyb2xsZXJzL1Byb2Zlc3Npb25hbENvbnRyb2xsZXJcIjtcclxuXHJcbmxldCBjb250cm9sbGVyID0gbmV3IFByb2Zlc3Npb25hbENvbnRyb2xsZXIoKTtcclxuXHJcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnRuLW1vZGFsLXByb2Zlc3Npb25hbFwiKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAkKFwiI21vZGFsUHJvZmVzc2lvbmFsXCIpLm1vZGFsKFwic2hvd1wiKTtcclxufSk7XHJcblxyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2Zlc3Npb25hbEZvcm1cIikuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZXZlbnQgPT4ge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIGNvbnRyb2xsZXIuY3JlYXRlUHJvZmVzc2lvbmFsKCk7XHJcbiAgICAkKFwiI21vZGFsUHJvZmVzc2lvbmFsXCIpLm1vZGFsKFwiaGlkZVwiKTtcclxuXHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmJ0bi1lZGl0LXByb2Zlc3Npb25hbFwiKS5mb3JFYWNoKGVsZW1lbnQgPT4gZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBsZXQgaWQgPSB0aGlzLmRhdGFzZXRbXCJwcm9mZXNzaW9uYWxpZFwiXTtcclxuICAgICAgICBjb250cm9sbGVyLmVkaXRQcm9mZXNzaW9uYWwoaWQpO1xyXG4gICAgfSkpO1xyXG59KTsiLCJpbXBvcnQgTW9kZWxWaWV3IGZyb20gXCIuLi9oZWxwZXJzL0JpbmRQcm94eU1vZGVsVmlld1wiO1xyXG5pbXBvcnQgUHJvZmVzc2lvbmFsc0xpc3QgZnJvbSBcIi4uL21vZGVscy9Qcm9mZXNzaW9uYWxzTGlzdFwiO1xyXG5pbXBvcnQgUHJvZmVzc2lvbmFsc0xpc3RWaWV3IGZyb20gXCIuLi92aWV3cy9Qcm9mZXNzaW9uYWxzTGlzdFZpZXdcIjtcclxuaW1wb3J0IFByb2Zlc3Npb25hbEZvcm0gZnJvbSBcIi4uL2Zvcm1zL1Byb2Zlc3Npb25hbEZvcm1cIjtcclxuaW1wb3J0IFByb2Zlc3Npb25hbEZvcm1WaWV3IGZyb20gXCIuLi92aWV3cy9Qcm9mZXNzaW9uYWxGb3JtVmlld1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvZmVzc2lvbmFsQ29udHJvbGxlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLl9wcm9mZXNzaW9uYWxzTGlzdCA9IG5ldyBNb2RlbFZpZXcobmV3IFByb2Zlc3Npb25hbHNMaXN0KCksIFxyXG4gICAgICAgICAgICBuZXcgUHJvZmVzc2lvbmFsc0xpc3RWaWV3KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9mZXNzaW9uYWxMaXN0JykpLCAnYWRkJyk7XHJcblxyXG4gICAgICAgIHRoaXMuX2Zvcm0gPSBuZXcgTW9kZWxWaWV3KG5ldyBQcm9mZXNzaW9uYWxGb3JtKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9mZXNzaW9uYWxGb3JtJykpLFxyXG4gICAgICAgICAgICBuZXcgUHJvZmVzc2lvbmFsRm9ybVZpZXcoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2Zlc3Npb25hbEZvcm1GaWVsZHMnKSksXHJcbiAgICAgICAgICAgICdjbGVhbicsICdpbmNsdWRlJyk7XHJcblxyXG4gICAgICAgIHRoaXMuaW5pdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXQoKSB7XHJcbiAgICAgICAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHhoci5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgeGhyLm9wZW4oJ0dFVCcsICdodHRwOi8vbG9jYWxob3N0OjgwODAvcHJvZmVzc2lvbmFscycpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC10eXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcclxuICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgdHJ1ZSk7XHJcbiAgICAgICAgeGhyLnNlbmQoKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgY2xlYW5Qcm9mZXNzaW9uYWxGb3JtKCkge1xyXG4gICAgICAgIHRoaXMuX2Zvcm0uY2xlYW4oKTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVQcm9mZXNzaW9uYWwoKSB7XHJcbiAgICAgICAgbGV0IHByb2Zlc3Npb25hbCA9IHRoaXMuX2Zvcm0uY29udmVydFRvTW9kZWwoKTtcclxuICAgICAgICB0aGlzLl9wcm9mZXNzaW9uYWxzTGlzdC5hZGQocHJvZmVzc2lvbmFsKTtcclxuICAgIH1cclxuXHJcbiAgICBlZGl0UHJvZmVzc2lvbmFsKGlkKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coaWQpO1xyXG4gICAgfVxyXG5cclxuXHJcbn0iXSwic291cmNlUm9vdCI6IiJ9